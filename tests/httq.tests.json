{
    "httq": {
        "routes": {
            "book_loan_v1": {
                "methods": ["post"],
                "pattern": "/api/library/v1/books/:isbn/loans",
                "sequence": ["pillage", "requestPathToRoutingKey", "requestToMessageContent", "fireAndForget"],
                "warez": {
                    "pillage": {
                        "type": "pillage"
                    },
                    "requestPathToRoutingKey": {
                        "type": "requestPathToRoutingKey",
                        "options": {
                            "method": {
                                "suffix": true,
                                "mapping": {
                                    "POST": "created"
                                }
                            }
                        }
                    },
                    "requestToMessageContent": {
                        "type": "requestToMessageContent"
                    },
                    "fireAndForget": {
                        "type": "fireAndForget",
                        "options": {
                            "publication": "p1"
                        }
                    }
                }
            },
            "book_loan_v2": {
                "methods": ["post"],
                "pattern": "/api/library/v2/books/:isbn/loans",
                "sequence": ["pillage", "requestToRoutingKey", "requestToMessage", "fireAndForget"],
                "warez": {
                    "pillage": {
                        "type": "pillage"
                    },
                    "requestToRoutingKey": {
                        "type": "requestToRoutingKey",
                        "options": {
                            "template": "library.v2.books.loans.{{request.method}}"
                        }
                    },
                    "requestToMessage": {
                        "type": "requestToMessage"
                    },
                    "fireAndForget": {
                        "type": "fireAndForget",
                        "options": {
                            "publication": "p1"
                        }
                    }

                }
            }
        }
    },
    "rascal": {
        "vhosts": {
            "/": {
                "namespace": true,
                "exchanges": {
                    "e1": {}
                },
                "queues": {
                    "q1": {}
                },
                "bindings": {
                    "b1": {
                        "source": "e1",
                        "destination": "q1"
                    }
                }
            }
        },
        "publications": {
            "p1": {
                "exchange": "e1"
            }
        },
        "subscriptions": {
            "s1": {
                "queue": "q1"
            }
        }
    }
}